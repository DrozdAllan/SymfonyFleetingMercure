{% extends "base.html.twig" %}

{% block body %}

	<div
		class="container">

		<!-- Display a payment form -->
		<form id="payment-form">
			<h4>Rappel de l'offre sélectionnée :
				<br>
				Abonnement Fleeting :
				{{ offerInfo.VipOffer }}
				<br>
				Prix :
				{{ offerInfo.VipPrice | price }}</h4>
			<div id="card-element"><!--Stripe.js injects the Card Element--></div>
			<button id="submit">
				<div class="spinner hidden" id="spinner"></div>
				<span id="button-text">Payer maintenant</span>
			</button>
			<p id="card-error" role="alert"></p>
			<a href="{{path('vip')}}">Revenir aux offres</a>
		</form>

	</div>


{% endblock %}


{% block javascripts %}
	<script src="https://js.stripe.com/v3/"></script>

	<script>
		const clientSecret = '{{ clientSecret }}';
    const stripe = Stripe('{{stripePublicKey}}');
    const redirectSuccessUrl = "{{ url('checkoutsuccess') }}";
	</script>

<script src="{{asset('js/checkout.js')}}"></script>

{% endblock %}
